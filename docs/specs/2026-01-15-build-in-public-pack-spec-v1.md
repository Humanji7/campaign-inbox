# Build-in-public Pack Spec v1 (GitHub commits → cards)
Дата: 2026-01-15

Цель: сделать Pack “с информацией”, который превращает активность в проектах (коммиты) в кандидатов для публикаций.

## 1) Подключение (MVP)
- GitHub OAuth
- только public repos
- пользователь сам выбирает репозитории (чеклист)

OAuth scopes (MVP):
- не запрашивать доступ к private репозиториям,
- не запрашивать `repo`/широкие scopes,
- достаточно scopes для идентификации пользователя и чтения его public реп/коммитов.

## 2) Данные (MVP)
Минимизация данных:
- используем только `commit message` + метаданные (repo, автор, дата, sha)
- не используем diff/код

Почему: снижает риск утечки кода и делает интеграцию проще.

## 3) UX: шаги Pack
1) Connect GitHub
2) Select repos (чеклист)
3) Choose window: “последние N коммитов” или “последние X дней” (MVP может быть только N)
4) Generate → карточки в Inbox

Состояния:
- empty: нет выбранных реп → “выбери репы”
- empty: репы есть, коммитов нет → “выбери другой период”
- error: rate limit / auth error → “переподключить”

## 4) Сигналы из commit messages (что извлекаем)
Facts/Signals LLM должен пытаться извлечь:
- “что изменилось” (feature/bugfix/refactor/release)
- “почему это важно” (польза/метрика/урок)
- “что было сложно” (инсайт)
- “что дальше” (следующий шаг)

Выход: структурированный JSON (не готовый твит).

## 5) Генерация карточек
Template-based LLM генерирует 1..K карточек:
- `content` (текст поста)
- `risk_chips` (если не хватает контекста, ссылок, конкретики)
- `status`: `ready` или `needs_info`

## 6) Приватность / безопасность (MVP)
- не отправляем в LLM репо имена файлов, diff или код
- коммит messages могут содержать секреты → фильтруем очевидные токены (ключи/пароли) и даём пользователю предупреждение

## 7) API и лимиты (черновик)
Цель: не зависеть от сложных интеграций, но быть предсказуемыми.

Минимальный набор операций:
- список public реп пользователя (для чеклиста выбора)
- выборка последних N коммитов по выбранным репам

Правила (MVP):
- ограничение N (например 50 суммарно по всем выбранным репам),
- кэшировать результаты выборки коммитов на короткое время (например 5–15 минут),
- при rate limit — показывать понятную ошибку и кнопку “попробовать позже”.

## 7) Открытые вопросы
- Какой дефолт N коммитов оптимален (20/50/100)?
- Нужны ли “темы проекта” (ручной контекст) как часть Pack config?
