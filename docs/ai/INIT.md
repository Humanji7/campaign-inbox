# Campaign Inbox — AI Init (как со мной работать)
Дата: 2026-01-15

> Status note (2026-01-20): project direction is pivoting toward **Brand Ops Cockpit** —
> a pull-mode “control plane” for public brand ops (monitor signals → draft → jump to thread → act manually).
> Current focus: **X/Twitter** end-to-end loop; other sources are optional/secondary.

## 1) Миссия MVP
Сделать продукт для регулярной публикации в X/Twitter, который **уменьшает трение до публикации** и помогает поддерживать **постоянную активность**.

Основа MVP: `PLAN.md` (golden path из “Verification”).

## 2) Роли и режим решений (ты + ИИ)
- **Ты**: задаёшь направление, критерии “ок/не ок”, и даёшь вето.
- **ИИ**: полностью проектирует, собирает артефакты и пишет код, минимизируя количество итераций и риск дорогих переделок.

Режим: смесь **C + D**
- **C (авто-утверждение):** если решение соответствует принципам ниже — делаем без дополнительных согласований.
- **D (вето/ощущение):** ты вмешиваешься, когда “не нравится”, есть трение, или пахнет будущим рефактором.

Ограничение реальности: “дорого/необратимо” ≈ “потом придётся рефакторить”, при ограниченном бюджете на подписки/время.

## 3) Принципы (что по умолчанию считаем правильным)
1) **Только golden path**: Pack → Inbox → Ship → Copy+Open X → URL confirm → History.
2) **Taste-first**: мы не “угадываем идеальный вкус”, а строим механизм для неизвестного вкуса.
3) **Анкета вкуса жёсткая по форме, гибкая по семантике**: всегда есть `Не знаю / Пропустить / По умолчанию`.
4) **Progressive refinement**: 1 микро‑уточнение вкуса после действий (особенно после Ship), без повторной анкеты.
5) **LLM внутри продукта обязателен**: генерация — template-based (промпт‑шаблоны + вкус + факты), но без попыток “магии без данных”.
6) **Паки должны быть “с информацией”**: для Build-in-public минимум — чтение git commits и активности по проектам.
7) **Избегать дорогих переделок**: отделять “ядро карточки” от “вкуса” (вкус версионируется и меняется часто).

Решение для MVP (подключения):
- GitHub OAuth
- только public repos
 - пользователь сам выбирает репозитории (чеклист)
 - данные для MVP: только commit messages + метаданные (без diff/кода)

## 8) Фронтенд best practices (подцеплено из Vercel)
В репозитории добавлен `AGENTS.md` с “Vercel React Best Practices” (перфоманс-правила). Используем их как дефолтный стандарт при написании/рефакторинге React кода.

Для MVP используем короткий чек-лист (subset), чтобы не перегружать процесс:
- `docs/specs/2026-01-15-frontend-mvp-performance-checklist.md`

## 9) Ops память (чтобы не забывать грабли)

### 9.1 Supabase Edge + JWT verify
Если Edge Function отвечает `401 body={}`, почти всегда причина в включённом тумблере **“Verify JWT with legacy secret”** (Supabase отклоняет ES256 JWT до выполнения кода).  
Правило: деплоим `generate-cards` только с `--no-verify-jwt` (см. `npm run deploy:generate-cards`).

### 9.2 GPT‑5 “молчал” (finish_reason=length, content пустой)
Фикс на уровне LLM клиента:
- для `gpt-5*` используем роль `developer`
- включаем `response_format: { type: "json_object" }` (только OpenAI)
- `reasoning_effort=minimal`
- не отправляем `temperature` для `gpt-5*` (кроме `gpt-5.2*`)

Runbook: `docs/runbooks/2026-01-17-supabase-edge-llm-runbook.md`

## 4) Эскалация (когда я обязан остановиться и спросить тебя “ок?”)
Я обязан эскалировать перед тем, как продолжать, если изменения затрагивают:
- навигацию/IA (tabs, назначение экранов),
- доменные статусы и контракт карточки,
- модель/версионирование вкуса и связь карточки с вкусом,
- Supabase schema/migrations/RLS,
- Ship flow (deeplink, URL confirm, статус `posted`),
- выбранный стек/ключевые библиотеки.

## 5) Дизайн‑пасы (как мы быстро валидируем)
Ритм: **10–15 минут ежедневно** (плюс по желанию 45 минут раз в неделю на “закрыть хвосты”).

Формат паса:
- 1 конкретный сценарий в день
- ты даёшь 3 сигнала: “нравится/не нравится”, “где трение”, “что неприемлемо”
- я фиксирую решения и приношу следующий “контрольный снимок”

## 6) Вкус/голос (важно: это исследование, а не анкета-экзамен)
Ключ: пользователи (и ты сейчас) часто **не знают** свой вкус заранее. Поэтому:
- вкус допускает частичность и неопределённость,
- “болтовой режим” (сырая заметка) — валиден и может быть главным входом,
- CTA/примеры не требуются как “умение”; есть дефолты и переключатели.

### 6.1 “Болтовой” ввод (можно просто вставить текст)
Заполни, как получится (можно потоком сознания):

```
RAW_NOTES:
— о чём я пишу
— чего я хочу добиться
— кому это
— что нельзя/стыдно/опасно писать
— как хочу звучать (3–10 прилагательных)
— примеры (если есть)
— как отношусь к CTA (хочу/не хочу/не знаю)
```

### 6.2 Мини-профиль вкуса (если хочется формой)
```
GOAL:
AUDIENCE:
TOPICS_ALLOWED:
TOPICS_BANNED:
TONE (adjectives):
FORMAT (length/structure):
CTA (off/soft/normal/strong):
EXAMPLES (links/snippets):
```

## 7) Что я считаю “готово” перед стартом имплементации
- выбран стек MVP (может отличаться от `PLAN.md`, но с причиной),
- утверждены UX flow + анкета вкуса v1 + states,
- утверждён Domain Contract v1 + Taste System Spec v1 (с версионированием),
- определён первый “информационный” Pack (например: Build-in-public на базе commit-сигналов),
- есть хотя бы 5 записей в Decision Log (анкета, taste versioning, ship flow, statuses, packs).
